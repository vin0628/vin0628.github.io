<html>
  <head>
    <script src="js/fdb-all.min.js"></script>
    <script src="js/jquery-1.12.2.min (1).js"></script>
    <script src= "js/bootstrap.min.js"></script> 
    <link href="css/bootstrap.css" rel="stylesheet">
  
  
  </head>
  <body>
    name:<br>
  <input type="text" id="name"><br>
     age:<br>
  <input type="text" id="age"><br>
    <button type="button" id="subemit">確認</button>
    
    <table class="table table-hover"> 
        <thead>
            <tr>
                <td>姓名</td>
                <td>age</td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td></td>
                <td></td>
            </tr>
        </tbody>
    </table>  
     <script>
         
      var fdb = new ForerunnerDB();
      var db = fdb.db("OrangeApple");

      var studentCollection = db.collection('students');
      var scoreCollection = db.collection('scores');

      function Stu(stuid, name, age) {
  this.id = stuid;
  this.name = name;
  this.age = age;
}

function scores(stuid,subject ,scores) {
  this.stuid = stuid;
  this.subject = subject;
  this.scores = scores;
}

function manual_insert_data() {
  studentCollection.insert(new Stu(1, "Karl", 18));
  studentCollection.insert(new Stu(2, "Michael", 20));
  studentCollection.insert(new Stu(3, "Andy", 17));
  
  studentCollection.save();

}

function manual_insert_data() {
  scoresCollection.insert(new scores(1, "English", 18));
  scoresCollection.insert(new scores(2, "English", 20));
  scoresCollection.insert(new scores(3, "English", 17));
  
  scoresCollection.save();
}
 $("body").on("click", ".delete", function(){
   var id = $(this).attr("data-id")/1;
  studentCollection.remove({
    id: id
  })
  studentCollection.save();
   $(this).closest("tr").remove()
});
 
 function after_load() {
  var stus = studentCollection.find();
  var stus_size= stus.length;
  
  
  for(var i = 0; i < stus.length; i++) {
      $("table tbody").append("<tr><td>" + stus[i]["name"] + "</td><td>" + stus[i]["age"] + "</td><td><a data-id=\"" + stus[i]["id"] + "\" class=\"btn btn-default\">Detail</a></td><td><a data-id=\"" + stus[i]["id"] + "\" class=\"btn btn-default delete\">Delete</a></td></tr>");
    }
  }
  studentCollection.load(after_load);
  scoreCollection.load();

  $("#subemit").click(function(){
    var name = $("#name").val()
    var age = $("#age").val()
    var stus = studentCollection.find();
    var stus_size= stus.length;
    studentCollection.insert(new Stu(id,name ,age));
    studentCollection.save();
    $("table tbody").append("<tr><td>" + name + "</td><td>"+age+"</td><td><a data-id=\"" + id + "\" class=\"btn btn-default\">Detail</a></td><td><a data-id=\"" + id + "\" class=\"btn btn-default\">Delete</a></td></tr>");
   })
      </script>  
  </body>

</html>
